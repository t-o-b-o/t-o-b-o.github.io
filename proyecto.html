<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Principal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" type="text/css" href="css/proyecto.css">
    
    <!-- Configuración de Firebase -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAoCjv7vBfCznmoD5VmWdPq2WFH7VaTraY",
        authDomain: "tobo-b8f82.firebaseapp.com",
        databaseURL: "https://tobo-b8f82-default-rtdb.firebaseio.com",
        projectId: "tobo-b8f82",
        storageBucket: "tobo-b8f82.appspot.com",
        messagingSenderId: "442613776186",
        appId: "1:442613776186:web:8a9aadf6464f2540d2da03",
        measurementId: "G-47D8YCR6F0"
      };

      // Inicializar Firebase
      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
    </script>
    <script type="text/javascript" src="js/proyecto.js"></script>
</head>
<body>
    <header>
        <div class="encabezado">
            <img src="encabezado.jpg" alt="Encabezado" class="encabezado-imagen">
            <div class="texto-superpuesto">
                <h1>Puntuación de Proyectos</h1>
                <h2>Técnica 3</h2>
            </div>
        </div>
    </header>

    <section class="proyectos">
        <div class="cuadro">
            <h3>Proyectos</h3>
            <div class="cards">
                <!-- Primera card -->
                <div class="card">
                    <img src="IMG/cap.jpg" alt="Imagen Proyecto 1" class="card-imagen">
                    <h4>Proyecto 1</h4>
                    <p>Descripción</p>
                    <div class="estrellas" id="proyecto1-estrellas"></div>
                    <a href="proyect.html" class="boton" onclick="guardarUsuario()">Ver más</a>
                </div>
                <!-- Segunda card -->
                <div class="card">
                    <img src="proyecto2-foto.jpg" alt="Imagen Proyecto 2" class="card-imagen">
                    <h4>Proyecto 2</h4>
                    <p>Descripción</p>
                    <div class="estrellas" id="proyecto2-estrellas"></div>
                    <a href="proyect2.html" class="boton" onclick="guardarUsuario()">Ver más</a>
                </div>
                <!-- Otras cards de proyectos pueden añadirse de manera similar -->
            </div>
        </div>
    </section>

    <script type="module">
      import { ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

      // Función para mostrar estrellas basado en el promedio
      function mostrarEstrellas(promedio, elementoId) {
          const elemento = document.getElementById(elementoId);
          elemento.innerHTML = ''; // Limpiar estrellas anteriores

          const estrellasCompletas = Math.round(promedio);

          // Agregar estrellas doradas completas
          for (let i = 0; i < estrellasCompletas; i++) {
              elemento.innerHTML += '<span>&#9733;</span>'; // Estrella completa
          }

          // Agregar estrellas vacías hasta completar 5
          for (let i = estrellasCompletas; i < 5; i++) {
              elemento.innerHTML += '<span style="color: #bbb;">&#9733;</span>'; // Estrella vacía
          }
      }

      // Obtener y mostrar el promedio de estrellas desde Firebase
      document.addEventListener('DOMContentLoaded', function () {
          const promedioRef = ref(db, 'proyectos/promedioEstrellas');
          onValue(promedioRef, (snapshot) => {
              const promedioEstrellasProyecto1 = snapshot.val() || 0;
              mostrarEstrellas(promedioEstrellasProyecto1, 'proyecto1-estrellas');
          });
      });
    </script>
</body>
</html>